{"remainingRequest":"/Users/mirabilite/IdeaProjects/version1/automatic-test-paper/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mirabilite/IdeaProjects/version1/automatic-test-paper/src/components/page/examination/Questions.vue?vue&type=style&index=0&id=235bff9f&scoped=true&lang=css&","dependencies":[{"path":"/Users/mirabilite/IdeaProjects/version1/automatic-test-paper/src/components/page/examination/Questions.vue","mtime":1684243644865},{"path":"/Users/mirabilite/IdeaProjects/version1/automatic-test-paper/node_modules/css-loader/index.js","mtime":499162500000},{"path":"/Users/mirabilite/IdeaProjects/version1/automatic-test-paper/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":499162500000},{"path":"/Users/mirabilite/IdeaProjects/version1/automatic-test-paper/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mirabilite/IdeaProjects/version1/automatic-test-paper/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["\n.el-row {\n  margin-bottom: 20px;\n\n}\n.el-col {\n    border-radius: 4px;\n}\n\n.wrapper{\n\n}\n\n",{"version":3,"sources":["Questions.vue"],"names":[],"mappings":";AAufA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA","file":"Questions.vue","sourceRoot":"src/components/page/examination","sourcesContent":["<template>\n    <div class=\"wrapper\" style=\"height: auto\">\n      <div class=\"crumbs\">\n        <el-breadcrumb separator=\"/\">\n          <el-breadcrumb-item>\n            <i class=\"el-icon-lx-calendar\"></i>考试管理\n          </el-breadcrumb-item>\n          <el-breadcrumb-item>习题管理</el-breadcrumb-item>\n        </el-breadcrumb>\n      </div>\n\n        <el-row :gutter=\"20\">\n            <el-col :span=\"3\"><el-input v-model=\"keywords\" placeholder=\"请输入内容\"></el-input></el-col>\n          <el-col :span=\"3\"><el-input v-model=\"titleName\" placeholder=\"题目\"></el-input></el-col>\n          <el-col :span=\"3\"><el-input v-model=\"subjectName\" placeholder=\"科目\"></el-input></el-col>\n          <el-col :span=\"3\"><el-input v-model=\"className\" placeholder=\"班级\"></el-input></el-col>\n          <el-col :span=\"3\"><el-input v-model=\"titleFraction\" placeholder=\"分数\"></el-input></el-col>\n          <el-col :span=\"3\"><el-input v-model=\"titleType\" placeholder=\"难度\"></el-input></el-col>\n          <el-col :span=\"3\" ><el-button type=\"primary\" @click=\"queryPage\">查询</el-button></el-col>\n          <el-col :span=\"3\" ><el-button style=\"margin-left: -70px;\" type=\"primary\" @click=\"dialogVisible = true\">新增试题</el-button></el-col>\n        </el-row>\n\n        <el-table\n                :data=\"tableData\"\n                border\n                stripe\n                style=\"width: 90%\">\n            <el-table-column type=\"index\" width=\"50\"></el-table-column>\n            <el-table-column prop=\"titleName\" label=\"题目\" width=\"280\"></el-table-column>\n            <el-table-column prop=\"subjectName\" label=\"科目\" width=\"130\"></el-table-column>\n            <el-table-column prop=\"titleFraction\" label=\"分值\" style=\"width: 50px;\"></el-table-column>\n            <el-table-column prop=\"titleStatus\" label=\"题目类型\" :formatter=\"sfktFormate\"></el-table-column>\n            <el-table-column prop=\"titleType\" label=\"难度系数\" style=\"width: 150px;\"></el-table-column>\n            <el-table-column prop=\"titleAnswer\" label=\"答案\" width=\"180\"></el-table-column>\n            <el-table-column prop=\"createTime\" label=\"时间\" width=\"160\"></el-table-column>\n            <el-table-column fixed=\"right\" label=\"操作\" width=\"100\">\n                <template slot-scope=\"scope\">\n                    <el-button @click=\"handleClick(scope.row.titleId)\" type=\"text\" size=\"small\">编辑</el-button>\n                    <el-button type=\"text\" size=\"small\" @click=\"deleteClick(scope.row.titleId)\" >删除</el-button>\n                </template>\n            </el-table-column>\n        </el-table>\n\n        <Page :total=\"total\"\n              show-total\n              show-sizer\n              :page-size-opts=\"[10, 20, 30, 40, 10000]\"\n              v-show=\"tableDataShow\"\n              @on-change=\"changePage\"\n              @on-page-size-change=\"changePageSize\"\n              style=\"text-align: center; margin-top: 10px;\"\n        />\n\n        <!--新增题目弹窗-->\n        <el-dialog\n                title=\"提示\"\n                :visible.sync=\"dialogVisible\"\n                width=\"30%\"\n                :before-close=\"handleClose\">\n            <el-form ref=\"form\" :model=\"form\" label-width=\"100px\">\n                <el-form-item label=\"科目：\">\n                    <el-col :span=\"11\">\n                        <el-select v-model=\"form.subjectId\" clearable placeholder=\"请选择科目\">\n                            <el-option\n                                    v-for=\"item in this.subjectList\"\n                                    :key=\"item.subjectId\"\n                                    :label=\"item.subjectName\"\n                                    :value=\"item.subjectId\">\n                            </el-option>\n                        </el-select>\n                    </el-col>\n                    <el-col class=\"line\" :span=\"2\"></el-col>\n                    <el-col :span=\"11\">\n                        <el-form-item label=\"分值：\">\n                            <el-input v-model=\"form.titleFraction\"></el-input>\n                        </el-form-item>\n                    </el-col>\n                </el-form-item>\n                <el-form-item label=\"题型：\">\n                    <el-col :span=\"11\">\n                        <el-select v-model=\"form.titleStatus\" clearable placeholder=\"请选择题型\">\n                            <el-option label=\"单选题\" :value='0'></el-option>\n                            <el-option label=\"填空题\" :value='1'></el-option>\n                            <el-option label=\"主观题\" :value='2'></el-option>\n                        </el-select>\n                    </el-col>\n                    <el-col class=\"line\" :span=\"2\"></el-col>\n                    <el-col :span=\"11\">\n                        <el-form-item label=\"难度：\">\n                            <el-input v-model=\"form.titleType\"></el-input>\n                        </el-form-item>\n                    </el-col>\n                </el-form-item>\n                <el-form-item label=\"题目：\">\n                    <el-input v-model=\"form.titleName\"></el-input>\n                </el-form-item>\n                <el-row v-show=\"number===2\">\n                    <el-form-item label=\"答案：\">\n                        <el-input type=\"textarea\" v-model=\"form.answer\"></el-input>\n                    </el-form-item>\n                </el-row>\n                <el-row v-show=\"number===0\">\n                    <el-form-item label=\"答案：\">\n                        <el-input  v-model=\"form.answer\"></el-input>\n                    </el-form-item>\n                    <el-form-item label=\"选项A：\">\n                        <el-input v-model=\"form.choice1\"></el-input>\n                    </el-form-item>\n                    <el-form-item label=\"选项B：\">\n                        <el-input v-model=\"form.choice2\"></el-input>\n                    </el-form-item>\n                    <el-form-item label=\"选项C：\">\n                        <el-input v-model=\"form.choice3\"></el-input>\n                    </el-form-item>\n                    <el-form-item label=\"选项D：\">\n                        <el-input v-model=\"form.choice4\"></el-input>\n                    </el-form-item>\n                </el-row>\n                <el-row v-show=\"number===1\">\n                    <el-form-item label=\"答案：\">\n                        <el-input  v-model=\"form.answer\"></el-input>\n                    </el-form-item>\n                </el-row>\n            </el-form>\n            <span slot=\"footer\" class=\"dialog-footer\">\n              <el-button @click=\"dialogVisible = false\">取 消</el-button>\n              <el-button type=\"primary\" @click=\"insertQuestions\">确 定</el-button>\n            </span>\n        </el-dialog>\n\n        <!--修改题目弹窗-->\n        <el-dialog\n                title=\"提示\"\n                :visible.sync=\"dialogUpdate\"\n                width=\"30%\"\n                :before-close=\"handleCloseUpdate\">\n            <el-form ref=\"form\" :model=\"title\" :rules=\"rules\"  label-width=\"80px\">\n                <el-form-item label=\"科目：\" prop=\"subjectId\">\n                    <el-col :span=\"11\">\n                        <el-select v-model=\"title.subjectId\" clearable placeholder=\"请选择科目\">\n                            <el-option\n                                    v-for=\"item in this.subjectList\"\n                                    :key=\"item.subjectId\"\n                                    :label=\"item.subjectName\"\n                                    :value=\"item.subjectId\">\n                            </el-option>\n                        </el-select>\n                    </el-col>\n                    <el-col class=\"line\" :span=\"2\"></el-col>\n                    <el-col :span=\"11\">\n                        <el-form-item label=\"分值：\" prop=\"titleFraction\">\n                            <el-input v-model=\"title.titleFraction\"></el-input>\n                        </el-form-item>\n                    </el-col>\n                </el-form-item>\n                <el-form-item label=\"题型：\" prop=\"titleStatus\" >\n                    <el-col :span=\"11\">\n                        <el-select v-model=\"title.titleStatus\" disabled  clearable placeholder=\"请选择题目类型\">\n                            <el-option label=\"单选题\" :value='0'></el-option>\n                            <el-option label=\"填空题\" :value='1'></el-option>\n                            <el-option label=\"主观题\" :value='2'></el-option>\n                        </el-select>\n                    </el-col>\n                    <el-col class=\"line\" :span=\"2\"></el-col>\n                    <el-col :span=\"11\">\n                        <el-form-item label=\"难度：\"  prop=\"titleType\">\n                            <el-input v-model=\"title.titleType\"></el-input>\n                        </el-form-item>\n                    </el-col>\n                </el-form-item>\n                <el-form-item label=\"题目：\" prop=\"titleName\">\n                    <el-input v-model=\"title.titleName\"></el-input>\n                </el-form-item>\n                <el-form-item label=\"答案：\"  prop=\"titleAnswer\">\n                    <el-input type=\"textarea\" v-model=\"title.titleAnswer\"></el-input>\n                </el-form-item>\n\n                <el-row v-show=\"title.titleStatus===0\" >\n                    <el-form-item label=\"选项A：\" prop=\"choice1\">\n                        <el-input v-model=\"title.choice1\"></el-input>\n                    </el-form-item>\n                    <el-form-item label=\"选项B：\" prop=\"choice2\">\n                        <el-input v-model=\"title.choice2\"></el-input>\n                    </el-form-item>\n                    <el-form-item label=\"选项C：\" prop=\"choice3\">\n                        <el-input v-model=\"title.choice3\"></el-input>\n                    </el-form-item>\n                    <el-form-item label=\"选项D：\" prop=\"choice1\">\n                        <el-input v-model=\"title.choice1\"></el-input>\n                    </el-form-item>\n                </el-row>\n\n            </el-form>\n            <span slot=\"footer\" class=\"dialog-footer\">\n              <el-button @click=\"dialogUpdate = false\">取 消</el-button>\n              <el-button type=\"primary\" @click=\"updateQuestions()\">确 定</el-button>\n            </span>\n        </el-dialog>\n\n    </div>\n</template>\n\n<script>\n    export default {\n        inject:['reload'],\n        data() {\n            return {\n              titleName:'',\n              subjectName:'',\n              className:'',\n              titleType:'',\n              titleFraction:'',\n              classList:[],\n                tableData: [],\n                subjectList:[],\n                currentNum: 1,\n                pageSize: 10,\n                startDate: '',\n                total: 0,\n                keywords:'',\n                tableDataShow: false,\n                dialogVisible: false,\n                dialogUpdate:false,\n                title:{},\n                titleId:'',\n                form: {\n                    subjectId:'',\n                    titleName: '',\n                    titleType: '',\n                    titleFraction: '',\n                    titleAnswer: '',\n                    titleStatus: '',\n                    answer: '',\n                    choice1: '',\n                    choice2: '',\n                    choice3: '',\n                    choice4: '',\n                },\n                number: '',\n                rules: {\n                    name: [\n                        { required: true, message: '请输入活动名称', trigger: 'blur' },\n                        { min: 3, max: 5, message: '长度在 3 到 5 个字符', trigger: 'blur' }\n                    ],\n                    subjectId: [\n                        { required: true, message: '请选择科目', trigger: 'change' }\n                    ],\n                    titleName: [\n                        { required: true, message: '请填写题目', trigger: 'blur' }\n                    ],\n                    titleType: [\n                        { required: true, message: '请填写难度', trigger: 'blur' },\n                        {type: 'number', message: '难度必须为数字值'}\n                    ],\n                    titleAnswer: [\n                        { required: true, message: '请输入答案', trigger: 'blur' }\n                    ],\n                    titleStatus: [\n                        { required: true, message: '请选择题目类型', trigger: 'change' }\n                    ],\n                    choice1: [\n                        { required: true, message: '不能为空', trigger: 'blur' }\n                    ],\n                    choice2: [\n                        { required: true, message: '不能为空', trigger: 'blur' }\n                    ],\n                    choice3: [\n                        { required: true, message: '不能为空', trigger: 'blur' }\n                    ],\n                    choice4: [\n                        { required: true, message: '不能为空', trigger: 'blur' }\n                    ],\n\n                }\n            }\n\n\n        },\n        watch: {\n            form: {\n                handler: function () {\n                    this.number = this.form.titleStatus;\n                },\n                deep: true\n            }\n        },\n        methods: {\n            //table表格格式化\n            sfktFormate(row,index){\n                if (row.titleStatus == 1) {\n                    return \"填空题\";\n                } else if(row.titleStatus == 0){\n                    return \"单选题\";\n                }else if (row.titleStatus == 2){\n                    return \"主观题\";\n                }\n            },\n            updateQuestions(){\n                console.log(this.title)\n                let params = {\n                    titleId :this.titleId,\n                    subjectId: this.title.subjectId,\n                    titleName: this.title.titleName,\n                    titleType: this.title.titleType,\n                    titleFraction: this.title.titleFraction,\n                    titleStatus: this.title.titleStatus,\n                    titleAnswer: this.title.titleAnswer,\n                    choice1: this.title.choice1,\n                    choice2: this.title.choice2,\n                    choice3: this.title.choice3,\n                    choice4: this.title.choice4,\n\n                };\n                this.axios\n                    .post('/zj/title/updateTitle.htm',params)\n                    .then(\n                        function (response) {\n                            if (response.data.code == \"0000\"){\n                                this.$message.success(\"修改成功\");\n                                this.dialogUpdate  = false;\n                                this.reload();\n                            }else {\n                                this.$message.error(\"修改失败\");\n                            }\n                        }.bind(this)\n                    )\n                    .catch(function (error) {\n                        console.log(error);\n                    });\n            },\n            insertQuestions(){\n                let params = {\n                    classId:this.form.classId,\n                    subjectId: this.form.subjectId,\n                    titleName: this.form.titleName,\n                    titleType: this.form.titleType,\n                    titleFraction: this.form.titleFraction,\n                    titleStatus: this.form.titleStatus,\n                    titleAnswer: this.form.answer,\n                    choice1: this.form.choice1,\n                    choice2: this.form.choice2,\n                    choice3: this.form.choice3,\n                    choice4: this.form.choice4,\n\n                };\n                this.axios\n                    .post('/zj/title/insertByTitle.htm',params)\n                    .then(\n                        function (response) {\n                            if (response.data.code == \"0000\"){\n                                this.$message.success(\"新增成功\");\n                                this.dialogVisible  = false;\n                                this.reload();\n                            }else {\n                                this.$message.error(\"新增失败\");\n                            }\n                        }.bind(this)\n                    )\n                    .catch(function (error) {\n                        console.log(error);\n                    });\n\n            },\n            querySubjectList(){\n                this.axios\n                    .post('/zj/sub/queryListBySub.htm')\n                    .then(\n                        function (response) {\n                            this.subjectList = response.data.result;\n                        }.bind(this)\n                    )\n                    .catch(function (error) {\n                        console.log(error);\n                    });\n            },\n            handleClose(done) {\n                this.$confirm('确认关闭？')\n                    .then(_ => {\n                        done();\n                    })\n                    .catch(_ => {\n                    });\n            },\n            handleCloseUpdate(done){\n                this.$confirm('确认关闭？')\n                    .then(_ => {\n                        done();\n                    })\n                    .catch(_ => {\n                    });\n            },\n            handleClick(row) {\n                this.titleId =row\n                let params = {\n                   titleId: row\n                };\n                this.axios\n                    .post('/zj/title/queryTitleInfo.htm', params)\n                    .then(\n                        function (response) {\n                            this.title = response.data.result;\n                            console.log(this.title)\n                            this.dialogUpdate =true;\n\n                        }.bind(this)\n                    )\n                    .catch(function (error) {\n                        console.log(error);\n                    });\n\n            },\n            deleteClick(row){\n                let params = {\n                    titleId: row\n                };\n                this.axios\n                    .post('/zj/title/deleteTileInfo.htm', params)\n                    .then(\n                        function (response) {\n                            if (response.data.code == \"0000\"){\n                                this.$message.success(\"删除成功\");\n                                this.dialogVisible  = false;\n                                this.reload();\n                            }else {\n                                this.$message.error(\"删除失败\");\n                            }\n\n                        }.bind(this)\n                    )\n                    .catch(function (error) {\n                        console.log(error);\n                    });\n            },\n            changePage(page) {\n                //设置页码\n                this.currentNum = page;\n                this.queryPage();\n            },\n            changePageSize(pageSize) {\n                //设置每页展示数量\n                this.pageSize = pageSize;\n                this.queryPage();\n            },\n            queryPage() {\n                let params = {\n                  titleName:this.titleName,\n                  subjectName:this.subjectName,\n                  className:this.className,\n                  titleType:this.titleType,\n                  titleFraction:this.titleFraction,\n                  currentNum: this.currentNum,\n                  pageSize: this.pageSize,\n                  keyWords:this.keywords\n                };\n                this.axios\n                    .post('/zj/title/queryTitlePage.htm', params)\n                    .then(\n                        function (response) {\n                            this.tableData = response.data.result.list;\n                            this.total = response.data.result.count;\n                            this.tableDataShow = true;\n                        }.bind(this)\n                    )\n                    .catch(function (error) {\n                        console.log(error);\n                    });\n            },\n            queryClassList(){\n                this.axios\n                    .post('/zj/class/queryList.htm')\n                    .then(\n                        function (response) {\n                            this.classList = response.data.result;\n                        }.bind(this)\n                    )\n                    .catch(function (error) {\n                        console.log(error);\n                    });\n            }\n        },\n        created() {\n            this.queryPage()\n            this.querySubjectList()\n            this.queryClassList()\n        }\n    }\n</script>\n\n<style scoped>\n    .el-row {\n      margin-bottom: 20px;\n\n    }\n    .el-col {\n        border-radius: 4px;\n    }\n\n    .wrapper{\n\n    }\n\n</style>\n"]}]}