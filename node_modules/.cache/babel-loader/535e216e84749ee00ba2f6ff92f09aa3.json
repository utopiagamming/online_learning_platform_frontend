{"remainingRequest":"/Users/mirabilite/IdeaProjects/version1/automatic-test-paper/node_modules/babel-loader/lib/index.js!/Users/mirabilite/IdeaProjects/version1/automatic-test-paper/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/mirabilite/IdeaProjects/version1/automatic-test-paper/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/mirabilite/IdeaProjects/version1/automatic-test-paper/src/components/page/examination/answer.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/mirabilite/IdeaProjects/version1/automatic-test-paper/src/components/page/examination/answer.vue","mtime":1677723674000},{"path":"/Users/mirabilite/IdeaProjects/version1/automatic-test-paper/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mirabilite/IdeaProjects/version1/automatic-test-paper/node_modules/babel-loader/lib/index.js","mtime":456789000000},{"path":"/Users/mirabilite/IdeaProjects/version1/automatic-test-paper/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/mirabilite/IdeaProjects/version1/automatic-test-paper/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":["import test from '../../common/test';\nexport default {\n  data() {\n    return {\n      key: null,\n      //搜索关键字\n      allExam: null,\n      //所有考试信息\n      currentNum: 1,\n      pageSize: 10,\n      total: 0,\n      tableDataShow: true,\n      pagination: [],\n      dialogVisible: false,\n      allTitle: [],\n      title: {\n        examDate: '',\n        paperName: '',\n        userName: ''\n      },\n      jsonList: [],\n      classId: '',\n      paperId: ''\n    };\n  },\n  components: {\n    test\n  },\n  created() {\n    this.getExamInfo();\n  },\n  methods: {\n    closeDialog() {\n      this.dialogVisible = false;\n      this.allTitle = [];\n    },\n    changePage(page) {\n      //设置页码\n      this.currentNum = page;\n      this.getExamInfo();\n    },\n    changePageSize(pageSize) {\n      //设置每页展示数量\n      this.pageSize = pageSize;\n      this.getExamInfo();\n    },\n    //获取当前所有考试信息\n    getExamInfo() {\n      let params = {\n        currentNum: this.currentNum,\n        pageSize: this.pageSize\n      };\n      this.axios.post('/zj/paper/queryPaperPage.htm', params).then(function (response) {\n        this.pagination = response.data.result.list;\n        this.total = response.data.result.count;\n      }.bind(this)).catch(function (error) {\n        console.log(error);\n      });\n    },\n    sendForm(val) {\n      if (val) {\n        //提交的数据\n        let jsonArr = [];\n        let newArr = val.filter((item, i) => {\n          console.log(\"循环==i==\", item);\n          let obj = {};\n          obj.id = item.id;\n          obj.val = item.val;\n          jsonArr.push(JSON.stringify(obj));\n        });\n        this.jsonList.push(jsonArr);\n        console.log(this.jsonList);\n        let params = {\n          paperList: this.jsonList,\n          paperId: this.paperId,\n          classId: this.classId\n        };\n        this.axios.post('/zj/paper/successPaper.htm', params).then(function (response) {\n          if (response.data.code == '0000') {\n            this.$message.success('考试结束');\n          } else {\n            this.$message.error('提交失败');\n          }\n        }.bind(this)).catch(function (error) {\n          console.log(error);\n        });\n        this.allTitle = [];\n      } else {\n        this.$refs.form.checkForm();\n        this.allTitle = [];\n      }\n      this.dialogVisible = false;\n    },\n    changeArray(one, val, name) {\n      one.map(x => {\n        x[name] = val;\n        x['val'] = '';\n      });\n      return one;\n    },\n    toExam(item) {\n      if (item.status === 0) {\n        this.classId = item.classId;\n        this.paperId = item.paperId;\n        let params = {\n          paperId: item.paperId\n        };\n        this.allTitle = [];\n        this.axios.post('/zj/paper/addPaperByStudent.htm', params).then(function (response) {\n          if (response.data.code == '0000') {\n            this.$message.success('开始考试');\n            this.allTitle.push({\n              list: this.changeArray(response.data.result.oneList1, 1, 'type'),\n              fraction: response.data.result.fractionSum\n            });\n            this.title.examDate = response.data.result.examDate, this.title.paperName = response.data.result.paperName, this.title.userName = response.data.result.userName, this.allTitle.push({\n              list: this.changeArray(response.data.result.oneList2, 2, 'type'),\n              fraction: response.data.result.fractionSum1\n            });\n            this.allTitle.push({\n              list: this.changeArray(response.data.result.oneList3, 2, 'type'),\n              fraction: response.data.result.fractionSum2\n            });\n            console.log(this.allTitle);\n            this.dialogVisible = !this.dialogVisible;\n          } else {\n            this.$message.error('跳转失败');\n          }\n        }.bind(this)).catch(function (error) {\n          console.log(error);\n        });\n      }\n    }\n  }\n};",{"version":3,"mappings":"AA0DA;AAEA;EACAA;IACA;MACAC;MAAA;MACAC;MAAA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;QACAC;QACAC;QACAC;MACA;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IAAAC;EAAA;EAEAC;IACA;EACA;EACAC;IACAC;MACA;MACA;IACA;IACAC;MACA;MACA;MACA;IACA;IACAC;MACA;MACA;MACA;IACA;IAEA;IACAC;MACA;QACArB;QACAC;MACA;MACA,WACAqB,6CACAC,KACA;QACA;QACA;MACA,aACA,CACAC;QACAC;MACA;IACA;IACAC;MACA;QACA;QACA;QACA;UACAD;UACA;UACAE;UACAA;UACAC;QACA;QACA;QACAH;QACA;UACAI;UACAhB;UACAD;QACA;QACA,WACAU,2CACAC,KACA;UACA;YACA;UACA;YACA;UACA;QACA,cACAC;UACAC;QACA;QACA;MACA;QACA;QACA;MACA;MACA;IACA;IACAK;MACAC;QACAC;QACAA;MACA;MACA;IACA;IACAC;MACA;QACA;QACA;QACA;UACApB;QACA;QACA;QAEA,WACAS,gDACAC,KACA;UACA;YACA;YACA;cACAW;cACAC;YAEA;YACA,qDACA,uDACA,qDACA;cACAD;cACAC;YACA;YACA;cACAD;cACAC;YACA;YACAV;YACA;UACA;YACA;UACA;QACA,aACA,CACAD;UACAC;QACA;MACA;IACA;EACA;AACA","names":["data","key","allExam","currentNum","pageSize","total","tableDataShow","pagination","dialogVisible","allTitle","title","examDate","paperName","userName","jsonList","classId","paperId","components","test","created","methods","closeDialog","changePage","changePageSize","getExamInfo","post","then","catch","console","sendForm","obj","jsonArr","paperList","changeArray","one","x","toExam","list","fraction"],"sourceRoot":"src/components/page/examination","sources":["answer.vue"],"sourcesContent":["// 我的试卷页面\n<template>\n  <div id=\"myExam\">\n    <!--页面题头-->\n    <div class=\"title\">我的试卷</div>\n\n    <!--试卷列表-->\n    <div class=\"wrapper\">\n      <!--试卷列表-->\n      <ul class=\"paper\">\n        <li class=\"item\" v-for=\"(item, index) in pagination\" :key=\"index\"  @click=\"toExam(item)\">\n          <h2>试卷名称：{{ item.paperName }}</h2>\n          <h2 v-if=\"item.status===1\">考试成绩：{{item.fraction}}分，已考完</h2>\n          <p class=\"name\">班级：{{ item.className }} </p>\n          <p class=\"name\">科目：{{ item.subjectName }}</p>\n          <div class=\"info\">\n            <i class=\"el-icon-loading\"></i>\n            <span>考试日期：{{ item.paperDate }}</span>\n            <i class=\"iconfont icon-icon-time\"></i>\n            <span v-if=\"item.examDate != null\">限时{{ item.examDate }}分钟</span>\n<!--            <i class=\"iconfont icon-fenshu\"></i><span>满分{{item.totalScore}}分</span>-->\n          </div>\n        </li>\n      </ul>\n      <!--分页组件-->\n      <div class=\"pagination\">\n        <Page\n            :total=\"total\"\n            show-total\n            show-sizer\n            :page-size-opts=\"[10, 20, 30, 40, 10000]\"\n            v-show=\"tableDataShow\"\n            @on-change=\"changePage\"\n            @on-page-size-change=\"changePageSize\"\n            style=\"text-align: center\"\n        />\n      </div>\n      <!--点进去跳到 test.vue-->\n      <el-dialog :visible.sync=\"dialogVisible\" width=\"80%\">\n        <div class=\"all\">\n          <test :allTitle=\"allTitle\" :title=\"title\"\n                @sendForm=\"sendForm\" ref=\"form\"\n                v-if=\"dialogVisible\">\n          </test>\n        </div>\n        <span slot=\"footer\" class=\"dialog-footer tc\">\n            <div class=\"tc\">\n                <el-button @click=\"closeDialog\">取 消</el-button>\n                <el-button type=\"primary\" @click=\"sendForm()\">提交试卷</el-button>\n            </div>\n        </span>\n      </el-dialog>\n    </div>\n\n  </div>\n</template>\n\n<script>\nimport test from '../../common/test';\n\nexport default {\n  data() {\n    return {\n      key: null, //搜索关键字\n      allExam: null, //所有考试信息\n      currentNum: 1,\n      pageSize: 10,\n      total: 0,\n      tableDataShow: true,\n      pagination: [],\n      dialogVisible: false,\n      allTitle: [],\n      title: {\n        examDate: '',\n        paperName: '',\n        userName: ''\n      },\n      jsonList: [],\n      classId: '',\n      paperId: ''\n    };\n  },\n  components: {test},\n\n  created() {\n    this.getExamInfo();\n  },\n  methods: {\n    closeDialog() {\n      this.dialogVisible = false;\n      this.allTitle = []\n    },\n    changePage(page) {\n      //设置页码\n      this.currentNum = page;\n      this.getExamInfo();\n    },\n    changePageSize(pageSize) {\n      //设置每页展示数量\n      this.pageSize = pageSize;\n      this.getExamInfo();\n    },\n\n    //获取当前所有考试信息\n    getExamInfo() {\n      let params = {\n        currentNum: this.currentNum,\n        pageSize: this.pageSize\n      };\n      this.axios\n          .post('/zj/paper/queryPaperPage.htm', params)\n          .then(\n              function (response) {\n                this.pagination = response.data.result.list;\n                this.total = response.data.result.count;\n              }.bind(this)\n          )\n          .catch(function (error) {\n            console.log(error);\n          });\n    },\n    sendForm(val) {\n      if (val) {\n        //提交的数据\n        let jsonArr = [];\n        let newArr = val.filter((item, i) => {\n          console.log(\"循环==i==\", item);\n          let obj = {};\n          obj.id = item.id;\n          obj.val = item.val;\n          jsonArr.push(JSON.stringify(obj))\n        })\n        this.jsonList.push(jsonArr)\n        console.log(this.jsonList)\n        let params = {\n          paperList: this.jsonList,\n          paperId: this.paperId,\n          classId: this.classId\n        };\n        this.axios\n            .post('/zj/paper/successPaper.htm', params)\n            .then(\n                function (response) {\n                  if (response.data.code == '0000') {\n                    this.$message.success('考试结束');\n                  } else {\n                    this.$message.error('提交失败');\n                  }\n                }.bind(this))\n            .catch(function (error) {\n              console.log(error);\n            });\n        this.allTitle = [];\n      } else {\n        this.$refs.form.checkForm();\n        this.allTitle = [];\n      }\n      this.dialogVisible = false;\n    },\n    changeArray(one, val, name) {\n      one.map((x) => {\n        x[name] = val;\n        x['val'] = '';\n      });\n      return one;\n    },\n    toExam(item) {\n      if (item.status === 0) {\n        this.classId = item.classId;\n        this.paperId = item.paperId;\n        let params = {\n          paperId: item.paperId\n        };\n        this.allTitle=[];\n\n        this.axios\n            .post('/zj/paper/addPaperByStudent.htm', params)\n            .then(\n                function (response) {\n                  if (response.data.code == '0000') {\n                    this.$message.success('开始考试');\n                    this.allTitle.push({\n                      list: this.changeArray(response.data.result.oneList1, 1, 'type'),\n                      fraction: response.data.result.fractionSum,\n\n                    });\n                    this.title.examDate = response.data.result.examDate,\n                        this.title.paperName = response.data.result.paperName,\n                        this.title.userName = response.data.result.userName,\n                        this.allTitle.push({\n                          list: this.changeArray(response.data.result.oneList2, 2, 'type'),\n                          fraction: response.data.result.fractionSum1\n                        });\n                    this.allTitle.push({\n                      list: this.changeArray(response.data.result.oneList3, 2, 'type'),\n                      fraction: response.data.result.fractionSum2\n                    });\n                    console.log(this.allTitle);\n                    this.dialogVisible = !this.dialogVisible;\n                  } else {\n                    this.$message.error('跳转失败');\n                  }\n                }.bind(this)\n            )\n            .catch(function (error) {\n              console.log(error);\n            });\n      }\n    }\n  }\n};\n</script>\n\n<style lang=\"scss\" scoped>\n.pagination {\n  padding: 20px 0px 30px 0px;\n\n  .el-pagination {\n    display: flex;\n    justify-content: center;\n  }\n}\n\n.tc {\n  text-align: center;\n}\n\n.paper {\n  h4 {\n    cursor: pointer;\n  }\n}\n\n.paper .item a {\n  color: #000;\n}\n\n.wrapper .top .order {\n  cursor: pointer;\n}\n\n.wrapper .top .order:hover {\n  color: #0195ff;\n  border-bottom: 2px solid #0195ff;\n}\n\n.all {\n  height: 600px;\n  overflow: auto;\n}\n\n.wrapper .top .order:visited {\n  color: #0195ff;\n  border-bottom: 2px solid #0195ff;\n}\n\n.item .info i {\n  margin-right: 5px;\n  color: #0195ff;\n}\n\n.item .info span {\n  margin-right: 14px;\n}\n\n.paper .item {\n  width: 380px;\n  border-radius: 4px;\n  padding: 20px 30px;\n  border: 1px solid #eee;\n  box-shadow: 0 0 4px 2px rgba(217, 222, 234, 0.3);\n  transition: all 0.6s ease;\n}\n\n.paper .item:hover {\n  box-shadow: 0 0 4px 2px rgba(140, 193, 248, 0.45);\n  transform: scale(1.03);\n}\n\n.paper .item .info {\n  font-size: 16px;\n  color: #88949b;\n}\n\n.paper .item .name {\n  font-size: 16px;\n  color: #88949b;\n}\n\n.paper * {\n  margin: 20px 0;\n}\n\n.wrapper .paper {\n  display: flex;\n  justify-content: space-around;\n  flex-wrap: wrap;\n}\n\n.top .el-icon-search {\n  position: absolute;\n  right: 10px;\n  top: 10px;\n}\n\n.top .icon {\n  position: relative;\n}\n\n.wrapper .top {\n  border-bottom: 1px solid #eee;\n  margin-bottom: 20px;\n}\n\n#myExam .search-li {\n  margin-left: auto;\n}\n\n.top .search-li {\n  margin-left: auto;\n}\n\n.top li {\n  display: flex;\n  align-items: center;\n}\n\n.top .search {\n  margin-left: auto;\n  padding: 10px;\n  border-radius: 4px;\n  border: 1px solid #eee;\n  box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);\n  transition: border-color ease-in-out 0.15s, box-shadow ease-in-out 0.15s;\n}\n\n.top .search:hover {\n  color: #0195ff;\n  border-color: #0195ff;\n}\n\n.wrapper .top {\n  display: flex;\n}\n\n.wrapper .top li {\n  margin: 20px;\n}\n\n#myExam {\n  width: 980px;\n  margin: 0 auto;\n}\n\n#myExam .title {\n  margin: 20px;\n  font-size: 18px;\n}\n\n#myExam .wrapper {\n  background-color: #fff;\n}\n</style>\n"]}]}