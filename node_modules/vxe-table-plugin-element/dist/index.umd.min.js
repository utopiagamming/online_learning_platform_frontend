!function(e,t){"function"==typeof define&&define.amd?define("vxe-table-plugin-element",["exports","xe-utils"],t):"undefined"!=typeof exports?t(exports,require("xe-utils")):(t((t={exports:{}}).exports,e.XEUtils),e.VXETablePluginElement=t.exports.default)}("undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:this,function(e,v){"use strict";var t;function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e){return null==e||""===e}function a(){return"value"}function l(e,t){return e&&t.valueFormat?v.default.toStringDate(e,t.valueFormat):e}function u(e,t,n){return v.default.toDateString(l(e,t),t.format||n)}function i(e,t,n,r){return v.default.map(e,function(e){return u(e,t,r)}).join(n)}function d(e,t,n,r){return(e=u(e,n,r))>=u(t[0],n,r)&&e<=u(t[1],n,r)}function m(e,t,n,r){t=t.$table.vSize;return v.default.assign(t?{size:t}:{},r,e.props,o({},a(),n))}function c(e,t,n,r){t=t.$form.vSize;return v.default.assign(t?{size:t}:{},r,e.props,o({},a(),n))}function p(e){return""+(s(e)?"":e)}function r(e,t,n,r){t=t.placeholder;return[e("span",{class:"vxe-cell--label"},t&&s(r)?[e("span",{class:"vxe-cell--placeholder"},p(t))]:p(r))]}function y(e,o){var e=e.nativeEvents,t={};return v.default.objectEach(e,function(r,e){t[e]=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.apply(void 0,[o].concat(t))}}),t}function f(e,o,t,r){var a=e.events,n="input",l=function(e){var t="change";switch(e.name){case"ElAutocomplete":t="select";break;case"ElInput":case"ElInputNumber":t="input"}return t}(e),u=l===n,i={};return v.default.objectEach(a,function(r,e){i[e]=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.apply(void 0,[o].concat(t))}}),t&&(i[n]=function(e){t(e),a&&a[n]&&a[n](o,e),u&&r&&r(e)}),!u&&r&&(i[l]=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];r.apply(void 0,t),a&&a[l]&&a[l].apply(a,[o].concat(t))}),i}function g(e,t){var n=t.$table,r=t.row,o=t.column;return f(e,t,function(e){v.default.set(r,o.property,e)},function(){n.updateStatus(t)})}function b(e,t,n,r){return f(e,t,function(e){n.data=e},r)}function h(e,t){var n=t.$form,r=t.data,o=t.property;return f(e,t,function(e){v.default.set(r,o,e)},function(){n.updateStatus(t)})}function E(e,t){var n,r,o=e.options,a=void 0===o?[]:o,l=e.optionGroups,u=e.props,i=void 0===u?{}:u,d=e.optionProps,o=void 0===d?{}:d,u=e.optionGroupProps,d=void 0===u?{}:u,e=t.row,u=t.column,t=t.$table,p=o.label||"label",f=o.value||"value",c=d.options||"options",d=v.default.get(e,u.property),u=u.id;if(i.filterable){t=t.fullAllDataRowMap;if(t.has(e)&&(r=(r=(n=t.get(e)).cellData)||(t.get(e).cellData={})),n&&r[u]&&r[u].value===d)return r[u].label}if(s(d))return"";i=v.default.map(i.multiple?d:[d],l?function(t){for(var e,n=0;n<l.length&&!(e=v.default.find(l[n][c],function(e){return e[f]===t}));n++);return e?e[p]:t}:function(t){var e=v.default.find(a,function(e){return e[f]===t});return e?e[p]:t}).join(", ");return r&&a&&a.length&&(r[u]={value:d,label:i}),i}function w(e,t){var n=e.props,e=void 0===n?{}:n,n=t.row,t=t.column,n=v.default.get(n,t.property)||[],t=[];return function t(n,e,r,o){var a=r[n];e&&r.length>n&&v.default.each(e,function(e){e.value===a&&(o.push(e.label),t(++n,e.children,r,o))})}(0,e.options,n,t),(!1===e.showAllLevels?t.slice(t.length-1,t.length):t).join(" ".concat(e.separator||"/"," "))}function M(e,t){var n=e.props,r=void 0===n?{}:n,e=t.row,n=t.column,t=r.rangeSeparator,o=void 0===t?"-":t,a=v.default.get(e,n.property);switch(r.type){case"week":a=u(a,r,"yyyywWW");break;case"month":a=u(a,r,"yyyy-MM");break;case"year":a=u(a,r,"yyyy");break;case"dates":a=i(a,r,", ","yyyy-MM-dd");break;case"daterange":a=i(a,r," ".concat(o," "),"yyyy-MM-dd");break;case"datetimerange":a=i(a,r," ".concat(o," "),"yyyy-MM-dd HH:ss:mm");break;case"monthrange":a=i(a,r," ".concat(o," "),"yyyy-MM");break;default:a=u(a,r,"yyyy-MM-dd")}return a}function I(e,t){var n=e.props,r=void 0===n?{}:n,o=t.row,e=t.column,n=r.isRange,t=r.format,a=void 0===t?"hh:mm:ss":t,t=r.rangeSeparator,t=void 0===t?"-":t,e=v.default.get(o,e.property);return e&&n&&(e=v.default.map(e,function(e){return v.default.toDateString(l(e,r),a)}).join(" ".concat(t," "))),v.default.toDateString(l(e,r),a)}function n(l){return function(e,t,n){var r=n.row,o=n.column,a=t.attrs,o=v.default.get(r,o.property);return[e(t.name,{attrs:a,props:m(t,n,o,l),on:g(t,n),nativeOn:y(t,n)})]}}function x(e,t,n){return[e("el-button",{attrs:t.attrs,props:m(t,n,null),on:f(t,n),nativeOn:y(t,n)},S(0,t.content))]}function k(t,e,n){return e.children.map(function(e){return x(t,e,n)[0]})}function O(d){return function(r,o,a){var e=a.column,l=o.name,u=o.attrs,i=y(o,a);return[r("div",{class:"vxe-table--filter-element-wrapper"},e.filters.map(function(e,t){var n=e.data;return r(l,{key:t,attrs:u,props:m(o,a,n,d),on:b(o,a,e,function(){C(a,!!e.data,e)}),nativeOn:i})}))]}}function C(e,t,n){e.$panel.changeOption({},t,n)}function F(e){var t=e.option,n=e.row,e=e.column,t=t.data,e=v.default.get(n,e.property);return-1<v.default.toValueString(e).indexOf(t)}function P(e){var t=e.option,n=e.row,e=e.column,t=t.data;return v.default.get(n,e.property)===t}function D(n,e,t){var r=t.label||"label",o=t.value||"value";return v.default.map(e,function(e,t){return n("el-option",{key:t,props:{value:e[o],label:e[r],disabled:e.disabled}})})}function S(e,t){return[p(t)]}function _(a){return function(e,t,n){var r=n.data,o=n.property;return[e(t.name,{attrs:t.attrs,props:c(t,n,v.default.get(r,o),a),on:h(t,n),nativeOn:y(t,n)})]}}function A(e,t,n){var r=t.attrs,o=c(t,n,null);return[e("el-button",{attrs:r,props:o,on:f(t,n),nativeOn:y(t,n)},S(0,t.content||o.content))]}function G(t,e,n){return e.children.map(function(e){return A(t,e,n)[0]})}function T(o){return function(e){var t=e.row,n=e.column,r=e.options;return r&&r.original?v.default.get(t,n.property):o(n.editRender||n.cellRender,e)}}function j(){return function(n,e,t){var r=e.name,o=e.options,a=void 0===o?[]:o,l=e.optionProps,u=void 0===l?{}:l,i=e.attrs,o=t.data,l=t.property,d=u.label||"label",p=u.value||"value",l=v.default.get(o,l);return[n("".concat(r,"Group"),{attrs:i,props:c(e,t,l),on:h(e,t),nativeOn:y(e,t)},a.map(function(e,t){return n(r,{key:t,props:{label:e[p],disabled:e.disabled}},e[d])}))]}}function N(e,t,n){for(var r,o=e.target;o&&o.nodeType&&o!==document;){if(n&&o.className&&o.className.split&&-1<o.className.split(" ").indexOf(n))r=o;else if(o===t)return{flag:!n||!!r,container:t,targetElem:r};o=o.parentNode}return{flag:!1}}function R(e,t){var n=document.body,t=e.$event||t;if(N(t,n,"el-autocomplete-suggestion").flag||N(t,n,"el-select-dropdown").flag||N(t,n,"el-cascader__dropdown").flag||N(t,n,"el-cascader-menus").flag||N(t,n,"el-time-panel").flag||N(t,n,"el-picker-panel").flag||N(t,n,"el-color-dropdown").flag)return!1}Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.VXETablePluginElement=void 0,v=(t=v)&&t.__esModule?t:{default:t};var V={install:function(e){var t=e.interceptor;e.renderer.mixin({ElAutocomplete:{autofocus:"input.el-input__inner",renderDefault:n(),renderEdit:n(),renderFilter:O(),defaultFilterMethod:P,renderItem:_(),renderItemContent:_()},ElInput:{autofocus:"input.el-input__inner",renderDefault:n(),renderEdit:n(),renderFilter:O(),defaultFilterMethod:F,renderItem:_(),renderItemContent:_()},ElInputNumber:{autofocus:"input.el-input__inner",renderDefault:n(),renderEdit:n(),renderFilter:O(),defaultFilterMethod:F,renderItem:_(),renderItemContent:_()},ElSelect:{renderEdit:function(n,e,t){var r=e.options,o=void 0===r?[]:r,a=e.optionGroups,l=e.optionProps,u=void 0===l?{}:l,i=e.optionGroupProps,d=void 0===i?{}:i,r=t.row,l=t.column,i=e.attrs,r=m(e,t,v.default.get(r,l.property)),l=g(e,t),t=y(e,t);if(a){var p=d.options||"options",f=d.label||"label";return[n("el-select",{attrs:i,props:r,on:l,nativeOn:t},v.default.map(a,function(e,t){return n("el-option-group",{key:t,props:{label:e[f]}},D(n,e[p],u))}))]}return[n("el-select",{props:r,attrs:i,on:l,nativeOn:t},D(n,o,u))]},renderCell:function(e,t,n){return r(e,t,0,E(t,n))},renderFilter:function(o,a,l){var e=a.options,u=void 0===e?[]:e,i=a.optionGroups,e=a.optionProps,d=void 0===e?{}:e,e=a.optionGroupProps,e=void 0===e?{}:e,p=e.options||"options",f=e.label||"label",e=l.column,c=a.attrs,s=y(a,l);return[o("div",{class:"vxe-table--filter-element-wrapper"},i?e.filters.map(function(e,t){var n=e.data,r=m(a,l,n);return o("el-select",{key:t,attrs:c,props:r,on:b(a,l,e,function(){C(l,r.multiple?e.data&&0<e.data.length:!v.default.eqNull(e.data),e)}),nativeOn:s},v.default.map(i,function(e,t){return o("el-option-group",{key:t,props:{label:e[f]}},D(o,e[p],d))}))}):e.filters.map(function(e,t){var n=e.data,r=m(a,l,n);return o("el-select",{key:t,attrs:c,props:r,on:b(a,l,e,function(){C(l,r.multiple?e.data&&0<e.data.length:!v.default.eqNull(e.data),e)}),nativeOn:s},D(o,u,d))}))]},defaultFilterMethod:function(e){var t=e.option,n=e.row,r=e.column,e=t.data,t=r.property,r=r.filterRender.props,r=void 0===r?{}:r,t=v.default.get(n,t);return r.multiple?v.default.isArray(t)?v.default.includeArrays(t,e):-1<e.indexOf(t):t==e},renderItem:function(n,e,t){var r=e.options,o=void 0===r?[]:r,a=e.optionGroups,l=e.optionProps,u=void 0===l?{}:l,i=e.optionGroupProps,d=void 0===i?{}:i,r=t.data,l=t.property,i=e.attrs,r=c(e,t,v.default.get(r,l)),l=h(e,t),t=y(e,t);if(a){var p=d.options||"options",f=d.label||"label";return[n("el-select",{attrs:i,props:r,on:l,nativeOn:t},v.default.map(a,function(e,t){return n("el-option-group",{props:{label:e[f]},key:t},D(n,e[p],u))}))]}return[n("el-select",{attrs:i,props:r,on:l,nativeOn:t},D(n,o,u))]},renderItemContent:function(n,e,t){var r=e.options,o=void 0===r?[]:r,a=e.optionGroups,l=e.optionProps,u=void 0===l?{}:l,i=e.optionGroupProps,d=void 0===i?{}:i,r=t.data,l=t.property,i=e.attrs,r=c(e,t,v.default.get(r,l)),l=h(e,t),t=y(e,t);if(a){var p=d.options||"options",f=d.label||"label";return[n("el-select",{attrs:i,props:r,on:l,nativeOn:t},v.default.map(a,function(e,t){return n("el-option-group",{props:{label:e[f]},key:t},D(n,e[p],u))}))]}return[n("el-select",{attrs:i,props:r,on:l,nativeOn:t},D(n,o,u))]},cellExportMethod:T(E),exportMethod:T(E)},ElCascader:{renderEdit:n(),renderCell:function(e,t,n){return r(e,t,0,w(t,n))},renderItem:_(),renderItemContent:_(),cellExportMethod:T(w),exportMethod:T(w)},ElDatePicker:{renderEdit:n(),renderCell:function(e,t,n){return r(e,t,0,M(t,n))},renderFilter:function(r,o,a){var e=a.column,l=o.attrs,u=y(o,a);return[r("div",{class:"vxe-table--filter-element-wrapper"},e.filters.map(function(e,t){var n=e.data;return r(o.name,{key:t,attrs:l,props:m(o,a,n),on:b(o,a,e,function(){C(a,!!e.data,e)}),nativeOn:u})}))]},defaultFilterMethod:function(e){var t=e.option,n=e.row,e=e.column,r=t.data,t=e.filterRender.props,o=void 0===t?{}:t,a=v.default.get(n,e.property);if(r)switch(o.type){case"daterange":return d(a,r,o,"yyyy-MM-dd");case"datetimerange":return d(a,r,o,"yyyy-MM-dd HH:ss:mm");case"monthrange":return d(a,r,o,"yyyy-MM");default:return a===r}return!1},renderItem:_(),renderItemContent:_(),cellExportMethod:T(M),exportMethod:T(M)},ElTimePicker:{renderEdit:n(),renderCell:function(e,t,n){return r(e,t,0,I(t,n))},renderItem:_(),renderItemContent:_(),cellExportMethod:T(I),exportMethod:T(I)},ElTimeSelect:{renderEdit:n(),renderItem:_(),renderItemContent:_()},ElRate:{renderDefault:n(),renderEdit:n(),renderFilter:O(),defaultFilterMethod:P,renderItem:_(),renderItemContent:_()},ElSwitch:{renderDefault:n(),renderEdit:n(),renderFilter:function(r,o,a){var e=a.column,l=o.name,u=o.attrs,i=y(o,a);return[r("div",{class:"vxe-table--filter-element-wrapper"},e.filters.map(function(e,t){var n=e.data;return r(l,{key:t,attrs:u,props:m(o,a,n),on:b(o,a,e,function(){C(a,v.default.isBoolean(e.data),e)}),nativeOn:i})}))]},defaultFilterMethod:P,renderItem:_(),renderItemContent:_()},ElSlider:{renderDefault:n(),renderEdit:n(),renderFilter:O(),defaultFilterMethod:P,renderItem:_(),renderItemContent:_()},ElRadio:{renderItem:j(),renderItemContent:j()},ElCheckbox:{renderItem:j(),renderItemContent:j()},ElButton:{renderDefault:x,renderItem:A,renderItemContent:A},ElButtons:{renderDefault:k,renderItem:G,renderItemContent:G}}),t.add("event.clearFilter",R),t.add("event.clearActived",R),t.add("event.clearAreas",R)}};e.VXETablePluginElement=V,"undefined"!=typeof window&&window.VXETable&&window.VXETable.use&&window.VXETable.use(V),e.default=V});